//transport @ header to <h1>header</h1>
//https://github.com/mqyqingfeng/Blog/issues/254#:~:text=%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BB%A3%E7%A0%81%E3%80%82-,%E5%AE%9E%E4%BE%8B%E8%AE%B2%E8%A7%A3,-%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC
function tagReplace(md) {
    md.inline.ruler.before('text', 'badge', function (state, silent) {
        var tagRegExp = /#[\u4e00-\u9fa5\w]+/g; // 匹配 #tag 的正则表达式
        var match = tagRegExp.exec(state.src.slice(state.pos)); // 尝试匹配 #tag
        if (!match)
            return false; // 如果没有匹配到，继续处理下一个 token
        if (!silent) { // 如果成功匹配，则生成对应的 token
            var token = state.push('badge_open', 'Badge', 1);
            token.attrs = [['type', 'danger']];
            token = state.push('text', '', 0);
            token.content = match[0].slice(1); // 去掉开头的 #
            token = state.push('badge_close', 'Badge', -1);
        }
        state.pos += match[0].length; // 跳过匹配到的字符串
        return true;
    });
    // const tagRegex = /#[\u4e00-\u9fa5\w]+/g;
    // md.renderer.rules.text = (tokens, idx) => {
    //   let text = tokens[idx].content;
    //   // 对HTML特殊字符进行转义
    //   text = md.utils.escapeHtml(text);
    //   let matches = text.match(tagRegex);
    //   if (matches) {
    //     matches.forEach((match) => {
    //       // 提取标签名称
    //       let tagName = match.slice(1);
    //       // 生成 <Badge> 标签
    //       let badge = `<Badge type="danger">${tagName}</Badge>`;
    //       // 替换原始文本中的标签
    //       text = text.replace(match, badge);
    //     });
    //   }
    //   return text;
    // };
}

//transport @ header to <h1>header</h1>
//https://github.com/mqyqingfeng/Blog/issues/254#:~:text=%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BB%A3%E7%A0%81%E3%80%82-,%E5%AE%9E%E4%BE%8B%E8%AE%B2%E8%A7%A3,-%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E4%BB%AC
function contaninerReplace(md) {
    var defaultFenceRenderer = md.renderer.rules.fence;
    md.renderer.rules.fence = function (tokens, idx, options, env, self) {
        var token = tokens[idx];
        if (token.info.startsWith("ad-")) {
            var type = token.info.slice(3);
            // 获取标题
            var titleMatch = token.content.match(/title:\s*(.*)/);
            var title = titleMatch ? titleMatch[1] : "";
            // 获取是否折叠
            var collapseMatch = token.content.match(/collapse:\s*(.*)/);
            var collapse = collapseMatch ? collapseMatch[1] : "";
            var container = '';
            if (collapse === 'true') {
                container = md.render(":::details\n".concat(token.content.replace(/collapse:true/, ""), "\n:::"));
            }
            else {
                container = md.render(":::".concat(type, " ").concat(title, "\n").concat(token.content.replace(/title:\s*(.*)/, ""), "\n:::"));
            }
            return container;
        }
        return defaultFenceRenderer(tokens, idx, options, env, self);
    };
}

var obsidianPlugin = function (options) {
    return {
        name: 'vuepress-plugin-obsidian',
        extendsMarkdown: function (md) {
            md.use(tagReplace)
                .use(contaninerReplace);
        }
    };
};

export { obsidianPlugin as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYXJrZG93bi1pdC1wbHVnaW5zL3RhZ1JlcGxhY2UudHMiLCIuLi9zcmMvbWFya2Rvd24taXQtcGx1Z2lucy9jb250YWluZXJSZXBsYWNlLnRzIiwiLi4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vdHJhbnNwb3J0IEAgaGVhZGVyIHRvIDxoMT5oZWFkZXI8L2gxPlxuLy9odHRwczovL2dpdGh1Yi5jb20vbXF5cWluZ2ZlbmcvQmxvZy9pc3N1ZXMvMjU0Izp+OnRleHQ9JUU1JUFFJTlFJUU3JThFJUIwJUU3JTlBJTg0JUU0JUJCJUEzJUU3JUEwJTgxJUUzJTgwJTgyLSwlRTUlQUUlOUUlRTQlQkUlOEIlRTglQUUlQjIlRTglQTclQTMsLSVFNiU4RSVBNSVFNCVCOCU4QiVFNiU5RCVBNSVFNiU4OCU5MSVFNCVCQiVBQ1xuXG5pbXBvcnQgU3RhdGVCbG9jayBmcm9tIFwibWFya2Rvd24taXQvbGliL3J1bGVzX2Jsb2NrL3N0YXRlX2Jsb2NrXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIm1hcmtkb3duLWl0L2xpYi90b2tlblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdGFnUmVwbGFjZShtZCkge1xuICBtZC5pbmxpbmUucnVsZXIuYmVmb3JlKCd0ZXh0JywgJ2JhZGdlJywgZnVuY3Rpb24gKHN0YXRlLCBzaWxlbnQpIHtcbiAgICB2YXIgdGFnUmVnRXhwID0gLyNbXFx1NGUwMC1cXHU5ZmE1XFx3XSsvZzsgLy8g5Yy56YWNICN0YWcg55qE5q2j5YiZ6KGo6L6+5byPXG4gICAgdmFyIG1hdGNoID0gdGFnUmVnRXhwLmV4ZWMoc3RhdGUuc3JjLnNsaWNlKHN0YXRlLnBvcykpOyAvLyDlsJ3or5XljLnphY0gI3RhZ1xuICAgIGlmICghbWF0Y2gpIHJldHVybiBmYWxzZTsgLy8g5aaC5p6c5rKh5pyJ5Yy56YWN5Yiw77yM57un57ut5aSE55CG5LiL5LiA5LiqIHRva2VuXG4gICAgaWYgKCFzaWxlbnQpIHsgLy8g5aaC5p6c5oiQ5Yqf5Yy56YWN77yM5YiZ55Sf5oiQ5a+55bqU55qEIHRva2VuXG4gICAgICB2YXIgdG9rZW4gPSBzdGF0ZS5wdXNoKCdiYWRnZV9vcGVuJywgJ0JhZGdlJywgMSk7XG4gICAgICB0b2tlbi5hdHRycyA9IFtbJ3R5cGUnLCAnZGFuZ2VyJ11dO1xuICAgICAgdG9rZW4gPSBzdGF0ZS5wdXNoKCd0ZXh0JywgJycsIDApO1xuICAgICAgdG9rZW4uY29udGVudCA9IG1hdGNoWzBdLnNsaWNlKDEpOyAvLyDljrvmjonlvIDlpLTnmoQgI1xuICAgICAgdG9rZW4gPSBzdGF0ZS5wdXNoKCdiYWRnZV9jbG9zZScsICdCYWRnZScsIC0xKTtcbiAgICB9XG4gICAgc3RhdGUucG9zICs9IG1hdGNoWzBdLmxlbmd0aDsgLy8g6Lez6L+H5Yy56YWN5Yiw55qE5a2X56ym5LiyXG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuICAvLyBjb25zdCB0YWdSZWdleCA9IC8jW1xcdTRlMDAtXFx1OWZhNVxcd10rL2c7XG5cbiAgLy8gbWQucmVuZGVyZXIucnVsZXMudGV4dCA9ICh0b2tlbnMsIGlkeCkgPT4ge1xuICAvLyAgIGxldCB0ZXh0ID0gdG9rZW5zW2lkeF0uY29udGVudDtcblxuICAvLyAgIC8vIOWvuUhUTUznibnmrorlrZfnrKbov5vooYzovazkuYlcbiAgLy8gICB0ZXh0ID0gbWQudXRpbHMuZXNjYXBlSHRtbCh0ZXh0KTtcblxuICAvLyAgIGxldCBtYXRjaGVzID0gdGV4dC5tYXRjaCh0YWdSZWdleCk7XG5cbiAgLy8gICBpZiAobWF0Y2hlcykge1xuICAvLyAgICAgbWF0Y2hlcy5mb3JFYWNoKChtYXRjaCkgPT4ge1xuICAvLyAgICAgICAvLyDmj5Dlj5bmoIfnrb7lkI3np7BcbiAgLy8gICAgICAgbGV0IHRhZ05hbWUgPSBtYXRjaC5zbGljZSgxKTtcblxuICAvLyAgICAgICAvLyDnlJ/miJAgPEJhZGdlPiDmoIfnrb5cbiAgLy8gICAgICAgbGV0IGJhZGdlID0gYDxCYWRnZSB0eXBlPVwiZGFuZ2VyXCI+JHt0YWdOYW1lfTwvQmFkZ2U+YDtcblxuICAvLyAgICAgICAvLyDmm7/mjaLljp/lp4vmlofmnKzkuK3nmoTmoIfnrb5cbiAgLy8gICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShtYXRjaCwgYmFkZ2UpO1xuICAvLyAgICAgfSk7XG4gIC8vICAgfVxuXG4gIC8vICAgcmV0dXJuIHRleHQ7XG4gIC8vIH07XG59XG4iLCIvL3RyYW5zcG9ydCBAIGhlYWRlciB0byA8aDE+aGVhZGVyPC9oMT5cbi8vaHR0cHM6Ly9naXRodWIuY29tL21xeXFpbmdmZW5nL0Jsb2cvaXNzdWVzLzI1NCM6fjp0ZXh0PSVFNSVBRSU5RSVFNyU4RSVCMCVFNyU5QSU4NCVFNCVCQiVBMyVFNyVBMCU4MSVFMyU4MCU4Mi0sJUU1JUFFJTlFJUU0JUJFJThCJUU4JUFFJUIyJUU4JUE3JUEzLC0lRTYlOEUlQTUlRTQlQjglOEIlRTYlOUQlQTUlRTYlODglOTElRTQlQkIlQUNcblxuXG5leHBvcnQgZnVuY3Rpb24gY29udGFuaW5lclJlcGxhY2UobWQpIHtcbiAgICBjb25zdCBkZWZhdWx0RmVuY2VSZW5kZXJlciA9IG1kLnJlbmRlcmVyLnJ1bGVzLmZlbmNlO1xuICAgIG1kLnJlbmRlcmVyLnJ1bGVzLmZlbmNlID0gKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIHNlbGYpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbaWR4XTtcbiAgICAgICAgaWYgKHRva2VuLmluZm8uc3RhcnRzV2l0aChcImFkLVwiKSkge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRva2VuLmluZm8uc2xpY2UoMyk7XG4gICAgICAgICAgICAvLyDojrflj5bmoIfpophcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSB0b2tlbi5jb250ZW50Lm1hdGNoKC90aXRsZTpcXHMqKC4qKS8pO1xuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0aXRsZU1hdGNoID8gdGl0bGVNYXRjaFsxXSA6IFwiXCI7XG4gICAgICAgICAgICAvLyDojrflj5bmmK/lkKbmipjlj6BcbiAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlTWF0Y2ggPSB0b2tlbi5jb250ZW50Lm1hdGNoKC9jb2xsYXBzZTpcXHMqKC4qKS8pO1xuICAgICAgICAgICAgY29uc3QgY29sbGFwc2UgPSBjb2xsYXBzZU1hdGNoID8gY29sbGFwc2VNYXRjaFsxXSA6IFwiXCI7XG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gJydcbiAgICAgICAgICAgIGlmIChjb2xsYXBzZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gbWQucmVuZGVyKGA6OjpkZXRhaWxzXFxuJHt0b2tlbi5jb250ZW50LnJlcGxhY2UoL2NvbGxhcHNlOnRydWUvLCBcIlwiKX1cXG46OjpgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IG1kLnJlbmRlcihgOjo6JHt0eXBlfSAke3RpdGxlfVxcbiR7dG9rZW4uY29udGVudC5yZXBsYWNlKC90aXRsZTpcXHMqKC4qKS8sIFwiXCIpfVxcbjo6OmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmYXVsdEZlbmNlUmVuZGVyZXIodG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgc2VsZik7XG4gICAgfTtcbn1cblxuIiwiaW1wb3J0IHsgc3RyaW5nUmVwbGFjZSB9IGZyb20gXCIuL21hcmtkb3duLWl0LXBsdWdpbnMvc3RyaW5nUmVwbGFjZVwiO1xyXG5pbXBvcnQgeyB3aWtpbGluayB9IGZyb20gXCIuL21hcmtkb3duLWl0LXBsdWdpbnMvd2lraUxpbmtcIjtcclxuaW1wb3J0IHsgdGFnUmVwbGFjZSB9IGZyb20gXCIuL21hcmtkb3duLWl0LXBsdWdpbnMvdGFnUmVwbGFjZVwiO1xyXG5pbXBvcnQge2NvbnRhbmluZXJSZXBsYWNlfSBmcm9tIFwiLi9tYXJrZG93bi1pdC1wbHVnaW5zL2NvbnRhaW5lclJlcGxhY2VcIjtcclxuXHJcbmNvbnN0IG9ic2lkaWFuUGx1Z2luID0gKG9wdGlvbnM/OiBhbnkpID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgbmFtZTogJ3Z1ZXByZXNzLXBsdWdpbi1vYnNpZGlhbicsXHJcbiAgICBleHRlbmRzTWFya2Rvd246IChtZCkgPT4ge1xyXG4gICAgICBtZC51c2UodGFnUmVwbGFjZSlcclxuICAgICAgICAudXNlKGNvbnRhbmluZXJSZXBsYWNlKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgb2JzaWRpYW5QbHVnaW5cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFLTSxTQUFVLFVBQVUsQ0FBQyxFQUFFLEVBQUE7QUFDM0IsSUFBQSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxVQUFVLEtBQUssRUFBRSxNQUFNLEVBQUE7QUFDN0QsUUFBQSxJQUFJLFNBQVMsR0FBRyxzQkFBc0IsQ0FBQztBQUN2QyxRQUFBLElBQUksS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDdkQsUUFBQSxJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sS0FBSyxDQUFDO0FBQ3pCLFFBQUEsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNYLFlBQUEsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ25DLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFD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
