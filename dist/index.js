function tagReplace(md) {
    md.inline.ruler.before('text', 'badge', function (state, silent) {
        // 匹配 #tag 的正则表达式,防止匹配到行内代码块以及markdown的链接
        var tagRegExp = /(?<!`)(?<![[(])#(?![^\]]*\))(?![^\[]*\]\()([\u4e00-\u9fa5\w]+)/g;
        var match = tagRegExp.exec(state.src.slice(state.pos)); // 尝试匹配 #tag
        if (!match)
            return false; // 如果没有匹配到，继续处理下一个 token
        if (!silent) { // 如果成功匹配，则生成对应的 token
            var token = state.push('badge_open', 'Badge', 1);
            token.attrs = [['type', 'danger']];
            token = state.push('text', '', 0);
            token.content = match[0].slice(1); // 去掉开头的 #
            token = state.push('badge_close', 'Badge', -1);
        }
        state.pos += match[0].length; // 跳过匹配到的字符串
        return true;
    });
}

function contaninerReplace(md) {
    var defaultRenderer = md.renderer.rules.fence;
    // Define a regular expression to match the fence blocks we want to convert
    var fenceRegex = /^(`{3,4})ad-(tip|warning|note|info|danger|right|center)\s*\n([\s\S]+?)\n\1$/gm;
    // Replace the fence blocks with container syntax before parsing
    md.core.ruler.before("normalize", "fence-to-container", function (state) {
        state.src = state.src.replace(fenceRegex, function (match, prefix, type, content) {
            var title = "", collapse = "";
            var titleMatch = content.match(/title:\s*(.*)/);
            if (titleMatch) {
                title = titleMatch[1];
                content = content.replace(/title:\s*(.*)/, "");
            }
            var collapseMatch = content.match(/collapse:\s*(.*)/);
            if (collapseMatch) {
                collapse = collapseMatch[1];
                content = content.replace(/collapse:\s*(.*)/, "");
            }
            var containerContent = ":::".concat(type, " ").concat(title, "\n").concat(content, "\n:::");
            if (collapse === "true") {
                containerContent = ":::details ".concat(title, "\n").concat(content, "\n:::");
            }
            if (type === "right" || type === "center") {
                containerContent = ":::".concat(type, "\n").concat(content, "\n:::");
            }
            return containerContent;
        });
    });
    // Render the container blocks using the default renderer
    md.renderer.rules.fence = function (tokens, idx, options, env, self) {
        var token = tokens[idx];
        if (token.type === "fence" && token.info.startsWith("ad-")) {
            return defaultRenderer(tokens, idx, options, env, self);
        }
        return defaultRenderer(tokens, idx, options, env, self);
    };
}

var obsidianPlugin = function (options) {
    return {
        name: 'vuepress-plugin-obsidian',
        extendsMarkdown: function (md) {
            md.use(tagReplace)
                .use(contaninerReplace);
        }
    };
};

export { obsidianPlugin as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYXJrZG93bi1pdC1wbHVnaW5zL3RhZ1JlcGxhY2UudHMiLCIuLi9zcmMvbWFya2Rvd24taXQtcGx1Z2lucy9jb250YWluZXJSZXBsYWNlLnRzIiwiLi4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB0YWdSZXBsYWNlKG1kKSB7XG4gIG1kLmlubGluZS5ydWxlci5iZWZvcmUoJ3RleHQnLCAnYmFkZ2UnLCBmdW5jdGlvbiAoc3RhdGUsIHNpbGVudCkge1xuICAgIC8vIOWMuemFjSAjdGFnIOeahOato+WImeihqOi+vuW8jyzpmLLmraLljLnphY3liLDooYzlhoXku6PnoIHlnZfku6Xlj4ptYXJrZG93bueahOmTvuaOpVxuICAgIHZhciB0YWdSZWdFeHAgPSAvKD88IWApKD88IVtbKF0pIyg/IVteXFxdXSpcXCkpKD8hW15cXFtdKlxcXVxcKCkoW1xcdTRlMDAtXFx1OWZhNVxcd10rKS9nOyBcbiAgICB2YXIgbWF0Y2ggPSB0YWdSZWdFeHAuZXhlYyhzdGF0ZS5zcmMuc2xpY2Uoc3RhdGUucG9zKSk7IC8vIOWwneivleWMuemFjSAjdGFnXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIGZhbHNlOyAvLyDlpoLmnpzmsqHmnInljLnphY3liLDvvIznu6fnu63lpITnkIbkuIvkuIDkuKogdG9rZW5cbiAgICBpZiAoIXNpbGVudCkgeyAvLyDlpoLmnpzmiJDlip/ljLnphY3vvIzliJnnlJ/miJDlr7nlupTnmoQgdG9rZW5cbiAgICAgIHZhciB0b2tlbiA9IHN0YXRlLnB1c2goJ2JhZGdlX29wZW4nLCAnQmFkZ2UnLCAxKTtcbiAgICAgIHRva2VuLmF0dHJzID0gW1sndHlwZScsICdkYW5nZXInXV07XG4gICAgICB0b2tlbiA9IHN0YXRlLnB1c2goJ3RleHQnLCAnJywgMCk7XG4gICAgICB0b2tlbi5jb250ZW50ID0gbWF0Y2hbMF0uc2xpY2UoMSk7IC8vIOWOu+aOieW8gOWktOeahCAjXG4gICAgICB0b2tlbiA9IHN0YXRlLnB1c2goJ2JhZGdlX2Nsb3NlJywgJ0JhZGdlJywgLTEpO1xuICAgIH1cbiAgICBzdGF0ZS5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoOyAvLyDot7Pov4fljLnphY3liLDnmoTlrZfnrKbkuLJcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY29udGFuaW5lclJlcGxhY2UobWQpIHtcbiAgICBjb25zdCBkZWZhdWx0UmVuZGVyZXIgPSBtZC5yZW5kZXJlci5ydWxlcy5mZW5jZTtcblxuICAgIC8vIERlZmluZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgZmVuY2UgYmxvY2tzIHdlIHdhbnQgdG8gY29udmVydFxuICAgIGNvbnN0IGZlbmNlUmVnZXggPSAvXihgezMsNH0pYWQtKHRpcHx3YXJuaW5nfG5vdGV8aW5mb3xkYW5nZXJ8cmlnaHR8Y2VudGVyKVxccypcXG4oW1xcc1xcU10rPylcXG5cXDEkL2dtO1xuXG4gICAgLy8gUmVwbGFjZSB0aGUgZmVuY2UgYmxvY2tzIHdpdGggY29udGFpbmVyIHN5bnRheCBiZWZvcmUgcGFyc2luZ1xuICAgIG1kLmNvcmUucnVsZXIuYmVmb3JlKFwibm9ybWFsaXplXCIsIFwiZmVuY2UtdG8tY29udGFpbmVyXCIsIHN0YXRlID0+IHtcbiAgICAgICAgc3RhdGUuc3JjID0gc3RhdGUuc3JjLnJlcGxhY2UoZmVuY2VSZWdleCwgKG1hdGNoLCBwcmVmaXgsIHR5cGUsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IFwiXCIsIGNvbGxhcHNlID0gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC90aXRsZTpcXHMqKC4qKS8pO1xuICAgICAgICAgICAgaWYgKHRpdGxlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvdGl0bGU6XFxzKiguKikvLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9jb2xsYXBzZTpcXHMqKC4qKS8pO1xuICAgICAgICAgICAgaWYgKGNvbGxhcHNlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBjb2xsYXBzZSA9IGNvbGxhcHNlTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvY29sbGFwc2U6XFxzKiguKikvLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb250YWluZXJDb250ZW50ID0gYDo6OiR7dHlwZX0gJHt0aXRsZX1cXG4ke2NvbnRlbnR9XFxuOjo6YDtcbiAgICAgICAgICAgIGlmIChjb2xsYXBzZSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXJDb250ZW50ID0gYDo6OmRldGFpbHMgJHt0aXRsZX1cXG4ke2NvbnRlbnR9XFxuOjo6YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHR5cGUgPT09IFwicmlnaHRcIiB8fCB0eXBlID09PSBcImNlbnRlclwiKXtcbiAgICAgICAgICAgICAgICBjb250YWluZXJDb250ZW50ID0gYDo6OiR7dHlwZX1cXG4ke2NvbnRlbnR9XFxuOjo6YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXJDb250ZW50O1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciB0aGUgY29udGFpbmVyIGJsb2NrcyB1c2luZyB0aGUgZGVmYXVsdCByZW5kZXJlclxuICAgIG1kLnJlbmRlcmVyLnJ1bGVzLmZlbmNlID0gKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIHNlbGYpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbaWR4XTtcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IFwiZmVuY2VcIiAmJiB0b2tlbi5pbmZvLnN0YXJ0c1dpdGgoXCJhZC1cIikpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0UmVuZGVyZXIodG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgc2VsZik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRSZW5kZXJlcih0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBzZWxmKTtcbiAgICB9O1xuXG59XG5cblxuIiwiaW1wb3J0IHsgdGFnUmVwbGFjZSB9IGZyb20gXCIuL21hcmtkb3duLWl0LXBsdWdpbnMvdGFnUmVwbGFjZVwiO1xyXG5pbXBvcnQge2NvbnRhbmluZXJSZXBsYWNlfSBmcm9tIFwiLi9tYXJrZG93bi1pdC1wbHVnaW5zL2NvbnRhaW5lclJlcGxhY2VcIjtcclxuXHJcbmNvbnN0IG9ic2lkaWFuUGx1Z2luID0gKG9wdGlvbnM/OiBhbnkpID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgbmFtZTogJ3Z1ZXByZXNzLXBsdWdpbi1vYnNpZGlhbicsXHJcbiAgICBleHRlbmRzTWFya2Rvd246IChtZCkgPT4ge1xyXG4gICAgICBtZC51c2UodGFnUmVwbGFjZSlcclxuICAgICAgICAudXNlKGNvbnRhbmluZXJSZXBsYWNlKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgb2JzaWRpYW5QbHVnaW5cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFNLFNBQVUsVUFBVSxDQUFDLEVBQUUsRUFBQTtBQUMzQixJQUFBLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBQTs7UUFFN0QsSUFBSSxTQUFTLEdBQUcsaUVBQWlFLENBQUM7QUFDbEYsUUFBQSxJQUFJLEtBQUssR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELFFBQUEsSUFBSSxDQUFDLEtBQUs7WUFBRSxPQUFPLEtBQUssQ0FBQztBQUN6QixRQUFBLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDWCxZQUFBLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqRCxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNuQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLFlBQUEsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLFlBQUEsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hELFNBQUE7UUFDRCxLQUFLLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDN0IsUUFBQSxPQUFPLElBQUksQ0FBQztBQUNkLEtBQUMsQ0FBQyxDQUFDO0FBQ0w7O0FDaEJNLFNBQVUsaUJBQWlCLENBQUMsRUFBRSxFQUFBO0lBQ2hDLElBQU0sZUFBZSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQzs7SUFHaEQsSUFBTSxVQUFVLEdBQUcsK0VBQStFLENBQUM7O0FBR25HLElBQUEsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSxVQUFBLEtBQUssRUFBQTtBQUN6RCxRQUFBLEtBQUssQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLFVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFBO0FBQ25FLFlBQUEsSUFBSSxLQUFLLEdBQUcsRUFBRSxFQUFFLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDOUIsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNsRCxZQUFBLElBQUksVUFBVSxFQUFFO0FBQ1osZ0JBQUEsS0FBSyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEIsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xELGFBQUE7WUFDRCxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFDeEQsWUFBQSxJQUFJLGFBQWEsRUFBRTtBQUNmLGdCQUFBLFFBQVEsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzVCLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3JELGFBQUE7WUFDRCxJQUFJLGdCQUFnQixHQUFHLEtBQU0sQ0FBQSxNQUFBLENBQUEsSUFBSSxjQUFJLEtBQUssRUFBQSxJQUFBLENBQUEsQ0FBQSxNQUFBLENBQUssT0FBTyxFQUFBLE9BQUEsQ0FBTyxDQUFDO1lBQzlELElBQUksUUFBUSxLQUFLLE1BQU0sRUFBRTtBQUNyQixnQkFBQSxnQkFBZ0IsR0FBRyxhQUFjLENBQUEsTUFBQSxDQUFBLEtBQUssRUFBSyxJQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsT0FBTyxVQUFPLENBQUM7QUFDN0QsYUFBQTtBQUNELFlBQUEsSUFBRyxJQUFJLEtBQUssT0FBTyxJQUFJLElBQUksS0FBSyxRQUFRLEVBQUM7QUFDckMsZ0JBQUEsZ0JBQWdCLEdBQUcsS0FBTSxDQUFBLE1BQUEsQ0FBQSxJQUFJLEVBQUssSUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBLE9BQU8sVUFBTyxDQUFDO0FBQ3BELGFBQUE7QUFDRCxZQUFBLE9BQU8sZ0JBQWdCLENBQUM7QUFDNUIsU0FBQyxDQUFDLENBQUM7QUFDUCxLQUFDLENBQUMsQ0FBQzs7QUFHSCxJQUFBLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxVQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUE7QUFDdEQsUUFBQSxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUIsUUFBQSxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3hELFlBQUEsT0FBTyxlQUFlLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzNELFNBQUE7QUFDRCxRQUFBLE9BQU8sZUFBZSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM1RCxLQUFDLENBQUM7QUFFTjs7QUNyQ00sSUFBQSxjQUFjLEdBQUcsVUFBQyxPQUFhLEVBQUE7SUFDbkMsT0FBTztBQUNMLFFBQUEsSUFBSSxFQUFFLDBCQUEwQjtRQUNoQyxlQUFlLEVBQUUsVUFBQyxFQUFFLEVBQUE7QUFDbEIsWUFBQSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQztpQkFDZixHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtTQUMxQjtLQUNGLENBQUE7QUFDSDs7OzsifQ==
